!function(c){var e=function(a,b){this.options=b;this.$element=c(a)};e.prototype={constructor:e,init:function(){var a="dd"==this.options.tag||"dropdown-tree"==this.options.type?"dd":"ul",b='<div class="btn-group">',b=this.options.split?b+'<button class="btn">Action</button><button class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>':b+'<a class="btn dropdown-toggle" data-toggle="dropdown" href="#"></a>';this.$btn=c(b+("<"+a+' class="dropdown-menu"></'+a+"></div>"));
this.$btn.insertAfter(this.$element);this.$label=this.$btn.find(".btn:first");this.$root=this.$btn.find(a);"right"==this.options.position&&this.$root.addClass("pull-right");"dropdown-tree"==this.options.type?(a=this.$element.find("option:not([data-parent])"),this.fillDropdownTree(this.$element,a,this.$root)):this.fillDropdown();if(this.options.split&&"function"==typeof this.options.btnClick){var d=this;this.$label.on("click",function(){d.options.btnClick(c(this).data("option"))})}this.$element.on("change",
this,this.change).trigger("change").hide()},fillDropdown:function(){var a=this;this.$element.find("option").each(function(){var b=c('<li><a href="#">'+c(this).text()+"</a></li>");b.on("click",a,a.click);b.data("option",c(this));a.$root.append(b)})},fillDropdownTree:function(a,b,d){var f=this;b.each(function(){var b=c(this);b.val();var g=b.text(),g=c('<dl><a href="#">'+g+"</a></dl>");d.append(g);g.find("a").data("option",b).on("click",f,f.click);b=a.find("[data-parent="+b.val()+"]");if(0<b.length){var e=
c("<dd/>");g.append(e);f.fillDropdownTree(a,b,e)}})},click:function(a){var a=a.data,b=c(this).data("option");b.parent().val(b.val());a.$element.trigger("change")},change:function(a){var a=a.data,b=a.$element.find("option:selected");0==b.length&&(b=a.$element.find("option:first"));var c=b.text();a.options.split||(c+=' <span class="caret"></span>');a.$label.html(c).data("option",b)}};c.fn.dropdown=function(a){return this.each(function(){var b=c(this),d=b.data("dropdown"),f=c.extend({},c.fn.dropdown.defaults,
b.data(),"object"==typeof a&&a);d||b.data("dropdown",d=new e(this,f));if("string"==typeof a)d[a]();else d.init()})};c.fn.dropdown.defaults={type:"dropdown",position:"left",split:!1,btnClick:null};c.fn.dropdown.Constructor=e;c(function(){c('select[data-toggle="dropdown"]').each(function(){var a=c(this);if(null!=a.data("opts"))try{eval("_opts="+a.data("opts"))}catch(b){window.console&&window.console.log&&window.console.log(b.message)}a.dropdown({})})})}(jQuery);